<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <meta charset="UTF-8">
  <title>間食カロリーチェッカー - 詳細</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="stylesheet" th:href="@{/css/base.css}">
<!--<link rel="stylesheet" th:href="@{/css/base.css(v=${#dates.createNow().time})}">-->
</head>

<body>
  <div class="page">
    <div class="container">
      <div class="page-title">詳細</div>
      <!--  <div class="page-sub">カロリー以外も見れます</div>-->
      <div class="card">
        <div class="muted">食べた日時</div>
        <div style="font-weight:900;" th:text="${#strings.substring(eatenDatetime, 0, 16)}">2026-01-28 12:34</div>
        <div class="muted" style="margin-top:10px;">メーカー</div>
        <div style="font-weight:900;" th:text="${makerName}">Calbee</div>
        <div class="muted" style="margin-top:10px;">食品</div>
        <div style="font-weight:900;" th:text="${foodName}">じゃがりこ</div>
        <div class="muted" style="margin-top:10px;">味</div>
        <div style="font-weight:900;" th:text="${flavorName}">サラダ</div>
        <!--    <div class="muted" style="margin-top:10px;">数量</div>-->
        <!--    <div style="font-weight:900;"><span th:text="${d.qty}">1</span></div>-->
      </div>
      <div class="card">
        <div class="muted" style="font-weight:800;">栄養情報</div>
        <div style="font-size:26px; font-weight:900; margin-top:6px;">
          <span th:text="${calorie}">333</span>
          <span class="muted" style="font-weight:700;">kcal</span>
        </div>
        <div class="grid" style="margin-top:12px;">
          <div class="tile">
            <div class="muted">たんぱく質</div>
            <div style="font-weight:900;">
              <span th:text="${protein}">0</span>g</div>
          </div>
          <div class="tile">
            <div class="muted">脂質</div>
            <div style="font-weight:900;">
              <span th:text="${lipid}">0</span>g</div>
          </div>
          <div class="tile">
            <div class="muted">炭水化物</div>
            <div style="font-weight:900;">
              <span th:text="${carbo}">0</span>g</div>
          </div>
          <div class="tile">
            <div class="muted">塩分</div>
            <div style="font-weight:900;">
              <span th:text="${salt}">0</span>g</div>
          </div>
        </div>
      </div>
      <div class="row" style="margin-top:12px;">
        <a class="btn btn-primary tap" th:href="@{/intake/edit(intakeId=${intakeId})}">編集</a>
        <form th:action="@{/intake/delete}" method="post" style="margin:0;">
          <input type="hidden" name="intakeId" th:value="${intakeId}">
          <button class="btn btn-danger tap" type="submit" onclick="return confirm('この履歴を削除しますか？');">削除</button>
        </form>
      </div>
      <div class="stack">
        <a class="btn btn-ghost tap" th:href="@{/}">TOPへ戻る</a>
      </div>
      <div style="height:72px;">
      </div>
    </div>
  </div>
    <nav class="bottom-nav">
      <a class="nav-item" th:href="@{/eat}">
        <div class="nav-emoji">🍽</div>
        <div class="nav-label">食べた！</div>
      </a>
      <a class="nav-item" th:href="@{/makers/new}">
        <div class="nav-emoji">🏭</div>
        <div class="nav-label">メーカー登録</div>
      </a>
      <a class="nav-item" th:href="@{/foods/new}">
        <div class="nav-emoji">🧃</div>
        <div class="nav-label">食品情報登録</div>
      </a>
      <a class="nav-item" th:href="@{/flavors/new}">
        <div class="nav-emoji">🧂</div>
        <div class="nav-label">栄養情報登録</div>
      </a>
    </nav>
	<script>
	// iOS Safariで :active を確実に効かせる
	document.addEventListener('touchstart', () => {}, {passive:true});
	//	遷移時アニメーション
	const kick = () => {
	const el = document.querySelector(".page");
	if(!el) return;
	el.classList.remove("is-ready"); // 再点火用
	requestAnimationFrame(() => el.classList.add("is-ready"));
	};
	document.addEventListener("DOMContentLoaded", kick);
	// iOS/Safari の戻る(キャッシュ復元)でも再点火
	window.addEventListener("pageshow", kick);
	</script>
</body>
</html>